<!DOCTYPE html>
<html>
    <head>
        <title>Webshop-Warenkorb</title>
        <link rel = 'stylesheet' href = 'CSS\Webshop-CSS.css'>
        <meta charset="utf-8"/>
    </head>
    <body>
        <header>
                <div class="navbar">
                        <a href="./index.html"><img src="./Bilder/book.png" alt="Logo"></a>
                        <a href="./kontakt.html">Contact</a>
                        <a href="./produktseite.html">Produktübersicht</a>
                        <a href="./Warenkorb.html"><img src="./Bilder/Warenkorb.jpg" alt="Warenkorb" height="30"></a>
                      </div>
        </header>
        <h1>Warenkorb</h1>
            <table>
                <tr>
                    <th></th>
                    <th>Buch</th>
                    <th>Anzahl</th>
                    <th>Preis</th>
                    <th>Aus Warenkorb entfernen</th>
                </tr>

                <tr> <!--Produkt 1-->
                    <td><a href="produktEins.html"><img src="./Bilder/Eragon.jpeg" alt="produkt1" class="warenkorbProduktbilder"></a></td>
                    <td>Eragon</td>
                    <td><span id="anzahl1"></span></td>
                    <td><span id="warenkorbPreis1"></span> GMZ</td>
                    <form id="loeschen1">
                        <td>
                            <input type="submit" value="Aus Warenkorb entfernen">
                        </td>
                    </form>
                </tr>

                <tr> <!--Produkt 2-->
                    <td><a href="produktZwei.html"><img src="./Bilder/DasPaket.jpeg" alt="produkt2"class="warenkorbProduktbilder"></a></td>
                    <td>Das Paket</td>
                    <td><span id="anzahl2"></span></td>
                    <td><span id="warenkorbPreis2"></span> GMZ</td>
                    <form id="loeschen2">
                        <td>
                            <input type="submit" value="Aus Warenkorb entfernen">
                        </td>
                    </form>
                </tr>

                <tr> <!--Produkt 3-->
                    <td><a href="produktDrei.html"><img src="./Bilder/GregsTagebuch.jpeg" alt="produkt3" class="warenkorbProduktbilder"></a></td>
                    <td>Gregs Tagebuch</td>
                    <td><span id="anzahl3"></span></td>
                    <td><span id="warenkorbPreis3"></span> GMZ</td>
                    <form id="loeschen3">
                        <td>
                            <input type="submit" value="Aus Warenkorb entfernen">
                        </td>
                    </form>
                </tr>

                <tr> <!--Produkt 4-->
                    <td><a href="produktVier.html"><img src="./Bilder/Grimms_Märchen.jpeg" alt="produkt4" class="warenkorbProduktbilder"></a></td>
                    <td>Grimms Märchen</td>
                    <td><span id="anzahl4"></span></td>
                    <td><span id="warenkorbPreis4"></span> GMZ</td>
                    <form id="loeschen4">
                        <td>
                            <input type="submit" value="Aus Warenkorb entfernen">
                        </td>
                    </form>
                </tr>

                <tr> <!--Produkt 5-->
                    <td><a href="produktFuenf.html"><img src="./Bilder/KochbuchVerzerrt.jpeg" alt="produkt5" class="warenkorbProduktbilder"></a></td>
                    <td>Kochbuch</td>
                    <td><span id="anzahl5"></span></td>
                    <td><span id="warenkorbPreis5"></span> GMZ</td>
                    <form id="loeschen5">
                        <td>
                            <input type="submit" value="Aus Warenkorb entfernen">
                        </td>
                    </form>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <th>Gesamtanzahl</th>
                    <th>Endpreis</th>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td><span id="gesamtanzahlWarenkorb"></span></td>
                    <td><span id="endpreis"></span> GMZ</td>
                </tr>
            </table>
            
        <form action="erfolgreicherEinkauf.html" id="erfolgreicherEinkauf">
            <input type="submit" name="warenkorbKaufen" id="warenkorbKaufen" value="Kaufen">
        </form>

        <form action="produktseite.html">
            <input type="submit" class="inline" name="weiterShoppen" id="weiterShoppen" value="Einkauf fortsetzen">
        </form>

        <script>
            var PreisAllerProdukte = 50;
            
            var AnzahlProduktEins = 0;
            var AnzahlProduktZwei = 0;
            var AnzahlProduktDrei = 0;
            var AnzahlProduktVier = 0;
            var AnzahlProduktFuenf = 0;
            
            /*Es wird überprüft, ob im local Storage ein Wert steht, der von der Produktseite kommt. Wenn keiner drin steht wird der Wert auf 0
            gesetzt. Wenn einer drin steht, wird der Wert durch parseInt vom String zum int. */
            if (localStorage.getItem("anzahlEins") === null) AnzahlProduktEins = 0;
            else { AnzahlProduktEins = parseInt(localStorage.getItem("anzahlEins"));}
            
            if (localStorage.getItem("anzahlZwei") === null) AnzahlProduktZwei = 0;
            else {AnzahlProduktZwei = parseInt(localStorage.getItem("anzahlZwei"));}

            if (localStorage.getItem("anzahlDrei") === null) AnzahlProduktDrei = 0;
            else {AnzahlProduktDrei = parseInt(localStorage.getItem("anzahlDrei"));}

            if (localStorage.getItem("anzahlVier") === null) AnzahlProduktVier = 0;
            else {AnzahlProduktVier = parseInt(localStorage.getItem("anzahlVier"));}

            if (localStorage.getItem("anzahlFuenf") === null) AnzahlProduktFuenf = 0;
            else {AnzahlProduktFuenf = parseInt(localStorage.getItem("anzahlFuenf"));}

            //anzahl1 bekommt den Wert von AnzahlProduktEins und anzahl1 wird im Warenkorb an der jeweiligen Stelle bei "Anzahl" angezeigt
            document.getElementById("anzahl1").innerHTML = AnzahlProduktEins;
            document.getElementById("anzahl2").innerHTML = AnzahlProduktZwei;
            document.getElementById("anzahl3").innerHTML = AnzahlProduktDrei;
            document.getElementById("anzahl4").innerHTML = AnzahlProduktVier;
            document.getElementById("anzahl5").innerHTML = AnzahlProduktFuenf;
        
            /*warenkorbPreis bekommt den Wert von dem Preis aller Produkte mal die Anzahl, die hinzugefügt wurde und warenkorbPreis wird
            an der jeweiligen Stelle bei "Preis" angezeigt.*/
            var preisProduktEins = PreisAllerProdukte * AnzahlProduktEins;
            var preisProduktZwei = PreisAllerProdukte * AnzahlProduktZwei;
            var preisProduktDrei = PreisAllerProdukte * AnzahlProduktDrei;
            var preisProduktVier = PreisAllerProdukte * AnzahlProduktVier;
            var preisProduktFuenf = PreisAllerProdukte * AnzahlProduktFuenf;

            document.getElementById("warenkorbPreis1").innerHTML = preisProduktEins;
            document.getElementById("warenkorbPreis2").innerHTML = preisProduktZwei;
            document.getElementById("warenkorbPreis3").innerHTML = preisProduktDrei;
            document.getElementById("warenkorbPreis4").innerHTML = preisProduktVier;
            document.getElementById("warenkorbPreis5").innerHTML = preisProduktFuenf;


            //gesamtanzahlWarenkorb bekommt den Wert von Warenkorb und wird an der jeweiligen Stelle bei "Gesamtanzahl" angezeigt.
            var gesamtanzahl = AnzahlProduktEins + AnzahlProduktZwei + AnzahlProduktDrei + AnzahlProduktVier + AnzahlProduktFuenf;
            document.getElementById("gesamtanzahlWarenkorb").innerHTML = gesamtanzahl;
            
            /*endpreis bekommt den Wert von allen Produktanzahlen * den Preis.*/
            document.getElementById("endpreis").innerHTML = (PreisAllerProdukte * AnzahlProduktEins) + (PreisAllerProdukte * AnzahlProduktZwei) + (PreisAllerProdukte * AnzahlProduktDrei) + (PreisAllerProdukte * AnzahlProduktVier) + (PreisAllerProdukte * AnzahlProduktFuenf);

            //Erfolgreicher Einkauf setzt den Warenkorb zurück
            document.getElementById("erfolgreicherEinkauf").onsubmit = function einkaufAbgeschlossen() {
                localStorage.removeItem("anzahlEins");
                localStorage.removeItem("anzahlZwei");
                localStorage.removeItem("anzahlDrei");
                localStorage.removeItem("anzahlVier");
                localStorage.removeItem("anzahlFuenf");
            }
            //Einträge aus dem Warenkorb löschen
            document.getElementById("loeschen1").onsubmit = function produkt1loeschen() {
                localStorage.removeItem("anzahlEins");
                location.reload();
            }
            document.getElementById("loeschen2").onsubmit = function produkt1loeschen() {
                localStorage.removeItem("anzahlZwei");
                location.reload();
            }
            document.getElementById("loeschen3").onsubmit = function produkt1loeschen() {
                localStorage.removeItem("anzahlDrei");
                location.reload();
            }
            document.getElementById("loeschen4").onsubmit = function produkt1loeschen() {
                localStorage.removeItem("anzahlVier");
                location.reload();
            }
            document.getElementById("loeschen5").onsubmit = function produkt1loeschen() {
                localStorage.removeItem("anzahlFuenf");
                location.reload();
            }
        </script>
        
    </body>
    <footer>
            <p>Posted by: Gruppe D</p>
            <p><a href="datenschutzerklaerung.html">Datenschutzerklärung</a></p>
            <p><a href="impressum.html">Impressum</a></p>
    </footer>
</html>